<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Таблица тем</title>
    <link rel="stylesheet" href="../styles/styles.css"/>
    <link rel="stylesheet" href="../styles/reset.css"/>
    <link rel="stylesheet" href="../styles/header.css"/>
</head>
<body>
<main class="main">
    <div class="container">
        <div class="inner">
            <div class="inner_table_block">
                <h1 class="inner_form_block_title">Список тем дипломных работ</h1>
                <form action="/" method="get">
                    <label for="filter">Выберите фильтр:</label>
                    <select name="filter" id="filter">
                        <option value="all" {{if eq .Filter "all"}}selected{{end}}>Все темы</option>
                        <option value="no-student" {{if eq .Filter "no-student"}}selected{{end}}>Темы, на которые не
                            назначен студент
                        </option>
                        <option value="no-grade" {{if eq .Filter "no-grade"}}selected{{end}}>Темы, у которых не стоят
                            оценки
                        </option>
                    </select>
                    <button type="submit"><a>Применить фильтр</a></button>
                    <hr/>
                    <table>
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Название темы</th>
                            <th>Преподаватель</th>
                            <th>Студент</th>
                            <th>Оценка за тест</th>
                            <th>Оценка за диплом</th>
                            <th>Действия</th>
                        </tr>
                        </thead>
                        <tbody>
                        {{range .Themes}}
                            <tr>
                                <td>{{.ThemeID}}</td>
                                <td>{{.Title}}</td>
                                <td>
                                    <a href="/teacher/{{.TeacherID}}"
                                    >{{.TeacherLastName}} {{.TeacherFirstName}} {{ if
                                        .TeacherMiddleName.Valid }} {{.TeacherMiddleName.String }}
                                        {{end}}
                                    </a>
                                </td>
                                <td>
                                    {{ if .StudentID.Valid }}
                                        <a href="/student/{{.StudentID.Int64}}"> {{.StudentFirstName.String}}
                                            {{.StudentLastName.String}} </a>{{else}} Не закреплен {{end}}

                                </td>
                                <td>
                                    {{ if .TestMark.Valid }} {{.TestMark.Int64}} {{else}} Не
                                    выставлена {{end}}
                                </td>
                                <td>
                                    {{ if .DiplomMark.Valid }} {{.DiplomMark.Int64}} {{else}} Не
                                    выставлена {{end}}
                                </td>
                                <td>
                                    <a href="/editTheme/{{.ThemeID}}" style="margin-bottom: 5px">Изменить тему</a>
                                    <a href="/assignTheme/{{.ThemeID}} " style="margin-bottom: 5px"
                                    >Закрепить тему за студентом</a
                                    >

                                    <a href="/grade/{{.ThemeID}}" style="margin-bottom: 5px">Выставить оценку</a>
                                </td>
                            </tr>
                        {{end}}
                        </tbody>
                    </table>
                    {{if .Error}}
                        <div class="error">{{.Error.Message}}</div>
                    {{end}}
                    <div class="button_block" style="display: flex;">
                    <a href="/addTheme" class="inner_form_block_submit" style="color:#fff">
                       Добавить тему
                    </a>
                    <a href="/report" class="inner_form_block_submit" style="color:#fff"> Сформировать отчет</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
</body>
</html>
